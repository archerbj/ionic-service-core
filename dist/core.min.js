!function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return o(n?n:e)},f,f.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){!function(e,r){"function"==typeof define&&define.amd?define([],r):"object"==typeof n?t.exports=r():e.returnExports=r()}(this,function(){function e(o,i){if("function"!=typeof i)throw new Error("Bad callback given: "+i);if(!o)throw new Error("No options given");var a=o.onResponse;if(o="string"==typeof o?{uri:o}:JSON.parse(JSON.stringify(o)),o.onResponse=a,o.verbose&&(e.log=r()),o.url&&(o.uri=o.url,delete o.url),!o.uri&&""!==o.uri)throw new Error("options.uri is a required argument");if("string"!=typeof o.uri)throw new Error("options.uri must be a string");for(var u=["proxy","_redirectsFollowed","maxRedirects","followRedirect"],c=0;c<u.length;c++)if(o[u[c]])throw new Error("options."+u[c]+" is not supported");if(o.callback=i,o.method=o.method||"GET",o.headers=o.headers||{},o.body=o.body||null,o.timeout=o.timeout||e.DEFAULT_TIMEOUT,o.headers.host)throw new Error("Options.headers.host is not supported");o.json&&(o.headers.accept=o.headers.accept||"application/json","GET"!==o.method&&(o.headers["content-type"]="application/json"),"boolean"!=typeof o.json?o.body=JSON.stringify(o.json):"string"!=typeof o.body&&(o.body=JSON.stringify(o.body)));var f=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")};if(o.qs){var l="string"==typeof o.qs?o.qs:f(o.qs);-1!==o.uri.indexOf("?")?o.uri=o.uri+"&"+l:o.uri=o.uri+"?"+l}var d=function(e){var t={};t.boundry="-------------------------------"+Math.floor(1e9*Math.random());var n=[];for(var r in e)e.hasOwnProperty(r)&&n.push("--"+t.boundry+'\nContent-Disposition: form-data; name="'+r+'"\n\n'+e[r]+"\n");return n.push("--"+t.boundry+"--"),t.body=n.join(""),t.length=t.body.length,t.type="multipart/form-data; boundary="+t.boundry,t};if(o.form){if("string"==typeof o.form)throw"form name unsupported";if("POST"===o.method){var p=(o.encoding||"application/x-www-form-urlencoded").toLowerCase();switch(o.headers["content-type"]=p,p){case"application/x-www-form-urlencoded":o.body=f(o.form).replace(/%20/g,"+");break;case"multipart/form-data":var h=d(o.form);o.body=h.body,o.headers["content-type"]=h.type;break;default:throw new Error("unsupported encoding:"+p)}}}return o.onResponse=o.onResponse||n,o.onResponse===!0&&(o.onResponse=i,o.callback=n),!o.headers.authorization&&o.auth&&(o.headers.authorization="Basic "+s(o.auth.username+":"+o.auth.password)),t(o)}function t(t){function n(){l=!0;var n=new Error("ETIMEDOUT");return n.code="ETIMEDOUT",n.duration=t.timeout,e.log.error("Timeout",{id:f._id,milliseconds:t.timeout}),t.callback(n,f)}function r(n){if(l)return e.log.debug("Ignoring timed out state change",{state:f.readyState,id:f.id});if(e.log.debug("State change",{state:f.readyState,id:f.id,timed_out:l}),f.readyState===a.OPENED){e.log.debug("Request started",{id:f.id});for(var r in t.headers)f.setRequestHeader(r,t.headers[r])}else f.readyState===a.HEADERS_RECEIVED?o():f.readyState===a.LOADING?(o(),s()):f.readyState===a.DONE&&(o(),s(),u())}function o(){if(!v.response){if(v.response=!0,e.log.debug("Got response",{id:f.id,status:f.status}),clearTimeout(f.timeoutTimer),f.statusCode=f.status,d&&0==f.statusCode){var n=new Error("CORS request rejected: "+t.uri);return n.cors="rejected",v.loading=!0,v.end=!0,t.callback(n,f)}t.onResponse(null,f)}}function s(){v.loading||(v.loading=!0,e.log.debug("Response body loading",{id:f.id}))}function u(){if(!v.end){if(v.end=!0,e.log.debug("Request done",{id:f.id}),f.body=f.responseText,t.json)try{f.body=JSON.parse(f.responseText)}catch(n){return t.callback(n,f)}t.callback(null,f,f.body)}}var f=new a,l=!1,d=i(t.uri),p="withCredentials"in f;if(c+=1,f.seq_id=c,f.id=c+": "+t.method+" "+t.uri,f._id=f.id,d&&!p){var h=new Error("Browser does not support cross-origin request: "+t.uri);return h.cors="unsupported",t.callback(h,f)}f.timeoutTimer=setTimeout(n,t.timeout);var v={response:!1,loading:!1,end:!1};return f.onreadystatechange=r,f.open(t.method,t.uri,!0),d&&(f.withCredentials=!!t.withCredentials),f.send(t.body),f}function n(){}function r(){var e,t,r={},i=["trace","debug","info","warn","error"];for(t=0;t<i.length;t++)e=i[t],r[e]=n,"undefined"!=typeof console&&console&&console[e]&&(r[e]=o(console,e));return r}function o(e,t){function n(n,r){return"object"==typeof r&&(n+=" "+JSON.stringify(r)),e[t].call(e,n)}return n}function i(e){var t,n=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/;try{t=location.href}catch(r){t=document.createElement("a"),t.href="",t=t.href}var o=n.exec(t.toLowerCase())||[],i=n.exec(e.toLowerCase()),s=!(!i||i[1]==o[1]&&i[2]==o[2]&&(i[3]||("http:"===i[1]?80:443))==(o[3]||("http:"===o[1]?80:443)));return s}function s(e){var t,n,r,o,i,s,a,u,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f=0,l=0,d="",p=[];if(!e)return e;do t=e.charCodeAt(f++),n=e.charCodeAt(f++),r=e.charCodeAt(f++),u=t<<16|n<<8|r,o=u>>18&63,i=u>>12&63,s=u>>6&63,a=63&u,p[l++]=c.charAt(o)+c.charAt(i)+c.charAt(s)+c.charAt(a);while(f<e.length);switch(d=p.join(""),e.length%3){case 1:d=d.slice(0,-2)+"==";break;case 2:d=d.slice(0,-1)+"="}return d}var a=XMLHttpRequest;if(!a)throw new Error("missing XMLHttpRequest");e.log={trace:n,debug:n,info:n,warn:n,error:n};var u=18e4,c=0;e.withCredentials=!1,e.DEFAULT_TIMEOUT=u,e.defaults=function(t,n){var r=function(e){var n=function(n,r){n="string"==typeof n?{uri:n}:JSON.parse(JSON.stringify(n));for(var o in t)void 0===n[o]&&(n[o]=t[o]);return e(n,r)};return n},o=r(e);return o.get=r(e.get),o.post=r(e.post),o.put=r(e.put),o.head=r(e.head),o};var f=["get","put","post","head"];return f.forEach(function(t){var n=t.toUpperCase(),r=t.toLowerCase();e[r]=function(t){"string"==typeof t?t={method:n,uri:t}:(t=JSON.parse(JSON.stringify(t)),t.method=n);var r=[t].concat(Array.prototype.slice.apply(arguments,[1]));return e.apply(this,r)}}),e.couch=function(t,r){function o(e,t,n){if(e)return r(e,t,n);if((t.statusCode<200||t.statusCode>299)&&n.error){e=new Error("CouchDB error: "+(n.error.reason||n.error.error));for(var o in n)e[o]=n[o];return r(e,t,n)}return r(e,t,n)}"string"==typeof t&&(t={uri:t}),t.json=!0,t.body&&(t.json=t.body),delete t.body,r=r||n;var i=e(t,o);return i},e})},{}],2:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(e){return"function"==typeof e}function i(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,i,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],a(n))return!1;if(o(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,i=new Array(r-1),u=1;r>u;u++)i[u-1]=arguments[u];n.apply(this,i)}else if(s(n)){for(r=arguments.length,i=new Array(r-1),u=1;r>u;u++)i[u-1]=arguments[u];for(c=n.slice(),r=c.length,u=0;r>u;u++)c[u].apply(this,i)}return!0},r.prototype.addListener=function(e,t){var n;if(!o(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,o(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned){var n;n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!o(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,i,a;if(!o(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,r=-1,n===t||o(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(n)){for(a=i;a-->0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],o(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?o(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?o(e._events[t])?1:e._events[t].length:0}},{}],3:[function(e,t,n){function r(){f=!1,a.length?c=a.concat(c):l=-1,c.length&&o()}function o(){if(!f){var e=setTimeout(r);f=!0;for(var t=c.length;t;){for(a=c,c=[];++l<t;)a[l].run();l=-1,t=c.length}a=null,f=!1,clearTimeout(e)}}function i(e,t){this.fun=e,this.array=t}function s(){}var a,u=t.exports={},c=[],f=!1,l=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new i(e,t)),1!==c.length||f||setTimeout(o,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=s,u.addListener=s,u.once=s,u.off=s,u.removeListener=s,u.removeAllListeners=s,u.emit=s,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],4:[function(e,t,n){(function(n,r){(function(){"use strict";function o(e){return"function"==typeof e||"object"==typeof e&&null!==e}function i(e){return"function"==typeof e}function s(e){return"object"==typeof e&&null!==e}function a(e){K=e}function u(e){z=e}function c(){return function(){n.nextTick(h)}}function f(){return function(){H(h)}}function l(){var e=0,t=new Q(h),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function d(){var e=new MessageChannel;return e.port1.onmessage=h,function(){e.port2.postMessage(0)}}function p(){return function(){setTimeout(h,1)}}function h(){for(var e=0;Y>e;e+=2){var t=te[e],n=te[e+1];t(n),te[e]=void 0,te[e+1]=void 0}Y=0}function v(){try{var t=e,n=t("vertx");return H=n.runOnLoop||n.runOnContext,f()}catch(r){return p()}}function g(){}function y(){return new TypeError("You cannot resolve a promise with itself")}function _(){return new TypeError("A promises callback cannot return that same promise.")}function m(e){try{return e.then}catch(t){return ie.error=t,ie}}function b(e,t,n,r){try{e.call(t,n,r)}catch(o){return o}}function w(e,t,n){z(function(e){var r=!1,o=b(n,t,function(n){r||(r=!0,t!==n?O(e,n):j(e,n))},function(t){r||(r=!0,x(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&o&&(r=!0,x(e,o))},e)}function k(e,t){t._state===re?j(e,t._result):t._state===oe?x(e,t._result):T(t,void 0,function(t){O(e,t)},function(t){x(e,t)})}function E(e,t){if(t.constructor===e.constructor)k(e,t);else{var n=m(t);n===ie?x(e,ie.error):void 0===n?j(e,t):i(n)?w(e,t,n):j(e,t)}}function O(e,t){e===t?x(e,y()):o(t)?E(e,t):j(e,t)}function I(e){e._onerror&&e._onerror(e._result),P(e)}function j(e,t){e._state===ne&&(e._result=t,e._state=re,0!==e._subscribers.length&&z(P,e))}function x(e,t){e._state===ne&&(e._state=oe,e._result=t,z(I,e))}function T(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+re]=n,o[i+oe]=r,0===i&&e._state&&z(P,e)}function P(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,o,i=e._result,s=0;s<t.length;s+=3)r=t[s],o=t[s+n],r?S(n,r,o,i):o(i);e._subscribers.length=0}}function C(){this.error=null}function L(e,t){try{return e(t)}catch(n){return se.error=n,se}}function S(e,t,n,r){var o,s,a,u,c=i(n);if(c){if(o=L(n,r),o===se?(u=!0,s=o.error,o=null):a=!0,t===o)return void x(t,_())}else o=r,a=!0;t._state!==ne||(c&&a?O(t,o):u?x(t,s):e===re?j(t,o):e===oe&&x(t,o))}function A(e,t){try{t(function(t){O(e,t)},function(t){x(e,t)})}catch(n){x(e,n)}}function R(e,t){var n=this;n._instanceConstructor=e,n.promise=new e(g),n._validateInput(t)?(n._input=t,n.length=t.length,n._remaining=t.length,n._init(),0===n.length?j(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&j(n.promise,n._result))):x(n.promise,n._validationError())}function D(e){return new ae(this,e).promise}function q(e){function t(e){O(o,e)}function n(e){x(o,e)}var r=this,o=new r(g);if(!$(e))return x(o,new TypeError("You must pass an array to race.")),o;for(var i=e.length,s=0;o._state===ne&&i>s;s++)T(r.resolve(e[s]),void 0,t,n);return o}function N(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(g);return O(n,e),n}function M(e){var t=this,n=new t(g);return x(n,e),n}function U(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function F(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function J(e){this._id=de++,this._state=void 0,this._result=void 0,this._subscribers=[],g!==e&&(i(e)||U(),this instanceof J||F(),A(this,e))}function B(){var e;if("undefined"!=typeof r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;(!n||"[object Promise]"!==Object.prototype.toString.call(n.resolve())||n.cast)&&(e.Promise=pe)}var G;G=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var H,K,V,$=G,Y=0,z=({}.toString,function(e,t){te[Y]=e,te[Y+1]=t,Y+=2,2===Y&&(K?K(h):V())}),W="undefined"!=typeof window?window:void 0,X=W||{},Q=X.MutationObserver||X.WebKitMutationObserver,Z="undefined"!=typeof n&&"[object process]"==={}.toString.call(n),ee="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,te=new Array(1e3);V=Z?c():Q?l():ee?d():void 0===W&&"function"==typeof e?v():p();var ne=void 0,re=1,oe=2,ie=new C,se=new C;R.prototype._validateInput=function(e){return $(e)},R.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},R.prototype._init=function(){this._result=new Array(this.length)};var ae=R;R.prototype._enumerate=function(){for(var e=this,t=e.length,n=e.promise,r=e._input,o=0;n._state===ne&&t>o;o++)e._eachEntry(r[o],o)},R.prototype._eachEntry=function(e,t){var n=this,r=n._instanceConstructor;s(e)?e.constructor===r&&e._state!==ne?(e._onerror=null,n._settledAt(e._state,t,e._result)):n._willSettleAt(r.resolve(e),t):(n._remaining--,n._result[t]=e)},R.prototype._settledAt=function(e,t,n){var r=this,o=r.promise;o._state===ne&&(r._remaining--,e===oe?x(o,n):r._result[t]=n),0===r._remaining&&j(o,r._result)},R.prototype._willSettleAt=function(e,t){var n=this;T(e,void 0,function(e){n._settledAt(re,t,e)},function(e){n._settledAt(oe,t,e)})};var ue=D,ce=q,fe=N,le=M,de=0,pe=J;J.all=ue,J.race=ce,J.resolve=fe,J.reject=le,J._setScheduler=a,J._setAsap=u,J._asap=z,J.prototype={constructor:J,then:function(e,t){var n=this,r=n._state;if(r===re&&!e||r===oe&&!t)return this;var o=new this.constructor(g),i=n._result;if(r){var s=arguments[r-1];z(function(){S(r,o,s,i)})}else T(n,o,e,t);return o},"catch":function(e){return this.then(null,e)}};var he=B,ve={Promise:pe,polyfill:he};"function"==typeof define&&define.amd?define(function(){return ve}):"undefined"!=typeof t&&t.exports?t.exports=ve:"undefined"!=typeof this&&(this.ES6Promise=ve),he()}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:3}],5:[function(e,t,n){"use strict";"object"==typeof angular&&angular.module&&angular.module("ionic.service.core",[]).provider("persistentStorage",function(){return{$get:[function(){var e=Ionic.getService("Storage");return e||(e=new Ionic.IO.Storage,Ionic.addService("Storage",e,!0)),e}]}}).factory("$ionicCoreSettings",[function(){return new Ionic.IO.Settings}]).factory("$ionicUser",[function(){return Ionic.User}]).run([function(){Ionic.io()}])},{}],6:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("./logger"),s=function(){function e(t,n){if(r(this,e),this.logger=new i.Logger({prefix:"Ionic App:"}),!t||""===t)return this.logger.info("No app_id was provided"),!1;if(!n||""===n)return this.logger.info("No api_key was provided"),!1;var o={id:t,apiKey:n};this.privateVar=function(e){return o[e]||null},this.devPush=null,this.gcmKey=null}return o(e,[{key:"toString",value:function(){return"<IonicApp ['"+this.id+"'>"}},{key:"id",get:function(){return this.privateVar("id")}},{key:"apiKey",get:function(){return this.privateVar("apiKey")}}]),e}();n.App=s},{"./logger":10}],7:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("./events"),s=e("./storage"),a=e("./logger"),u=function(){function e(){r(this,e);var t=this;this.logger=new a.Logger({prefix:"Ionic Core:"}),this.logger.info("init"),this._pluginsReady=!1,this.emitter=e.getEmitter();try{document.addEventListener("deviceready",function(){t.logger.info("plugins are ready"),t._pluginsReady=!0,t.emitter.emit("ionic_core:plugins_ready")},!1)}catch(n){t.logger.info("unable to listen for cordova plugins to be ready")}this._bootstrap()}return o(e,[{key:"_isCordovaAvailable",value:function(){var e=this;if(this.logger.info("searching for cordova.js"),"undefined"!=typeof cordova)return this.logger.info("cordova.js has already been loaded"),!0;for(var t=document.getElementsByTagName("script"),n=t.length,r=0;n>r;r++){var o=t[r].getAttribute("src");if(o){var i=o.split("/"),s=0;try{if(s=i.length,"cordova.js"===i[s-1])return e.logger.info("cordova.js has previously been included."),!0}catch(a){e.logger.info("encountered error while testing for cordova.js presence, "+a.toString())}}}return!1}},{key:"loadCordova",value:function(){var t=this;if(!this._isCordovaAvailable()){var n=document.createElement("script"),r="cordova.js";switch(e.getDeviceTypeByNavigator()){case"android":"file"===window.location.href.substring(0,4)&&(r="file:///android_asset/www/cordova.js");break;case"ipad":case"iphone":try{var o=window.location.search.match(/cordova_js_bootstrap_resource=(.*?)(&|#|$)/i);o&&(r=decodeURI(o[1]))}catch(i){t.logger.info("could not find cordova_js_bootstrap_resource query param"),t.logger.info(i)}break;case"unknown":return!1}n.setAttribute("src",r),document.head.appendChild(n),t.logger.info("injecting cordova.js")}}},{key:"_bootstrap",value:function(){this.loadCordova()}},{key:"onReady",value:function(e){var t=this;this._pluginsReady?e(t):t.emitter.on("ionic_core:plugins_ready",function(){e(t)})}}],[{key:"getEmitter",value:function(){return i.EventEmitter}},{key:"getStorage",value:function(){return s.Storage}},{key:"getDeviceTypeByNavigator",value:function(){var e=navigator.userAgent,t=e.match(/iPad/i);if(t&&"ipad"===t[0].toLowerCase())return"ipad";var n=e.match(/iPhone/i);if(n&&"iphone"===n[0].toLowerCase())return"iphone";var r=e.match(/Android/i);return r&&"android"===r[0].toLowerCase()?"android":"unknown"}},{key:"isAndroidDevice",value:function(){var t=e.getDeviceTypeByNavigator();return"android"===t?!0:!1}},{key:"isIOSDevice",value:function(){var t=e.getDeviceTypeByNavigator();return"iphone"===t||"ipad"===t?!0:!1}},{key:"deviceConnectedToNetwork",value:function(e){if("undefined"==typeof e&&(e=!1),"undefined"==typeof navigator.connection||"undefined"==typeof navigator.connection.type||"undefined"==typeof Connection)return e?!1:!0;switch(navigator.connection.type){case Connection.ETHERNET:case Connection.WIFI:case Connection.CELL_2G:case Connection.CELL_3G:case Connection.CELL_4G:case Connection.CELL:return!0;default:return!1}}}]),e}();n.IonicPlatform=u},{"./events":9,"./logger":10,"./storage":14}],8:[function(e,t,n){"use strict";var r=e("./app"),o=e("./core"),i=e("./events"),s=e("./logger"),a=e("./promise"),u=e("./request"),c=e("./settings"),f=e("./storage"),l=e("./user");window.Ionic=window.Ionic||{},Ionic.Core=o.IonicPlatform,Ionic.User=l.User,Ionic.IO={},Ionic.IO.App=r.App,Ionic.IO.EventEmitter=i.EventEmitter,Ionic.IO.Logger=s.Logger,Ionic.IO.Promise=a.Promise,Ionic.IO.DeferredPromise=a.DeferredPromise,Ionic.IO.Request=u.Request,Ionic.IO.Response=u.Response,Ionic.IO.APIRequest=u.APIRequest,Ionic.IO.APIResponse=u.APIResponse,Ionic.IO.Storage=f.Storage,Ionic.IO.Settings=c.Settings;var d={};Ionic.io=function(){return"undefined"==typeof Ionic.IO.main&&(Ionic.IO.main=new Ionic.IO.Core),Ionic.IO.main},Ionic.getService=function(e){return"undefined"!=typeof d[e]&&d[e]?d[e]:!1},Ionic.addService=function(e,t,n){t&&"undefined"==typeof d[e]?d[e]=t:t&&n&&(d[e]=t)},Ionic.removeService=function(e){"undefined"!=typeof d[e]&&delete d[e]}},{"./app":6,"./core":7,"./events":9,"./logger":10,"./promise":11,"./request":12,"./settings":13,"./storage":14,"./user":15}],9:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("events"),s=function(){function e(){r(this,e),this._emitter=new i}return o(e,[{key:"on",value:function(e,t){return this._emitter.on(e,t)}},{key:"emit",value:function(e,t){return this._emitter.emit(e,t)}}]),e}();n.EventEmitter=s},{events:2}],10:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){r(this,e);var n=t||{};this._silence=!1,this._prefix=!1,this._options=n,this._bootstrap()}return o(e,[{key:"_bootstrap",value:function(){this._options.prefix&&(this._prefix=this._options.prefix)}},{key:"info",value:function(e){this._silence||(this._prefix?console.log(this._prefix,e):console.log(e))}},{key:"error",value:function(e){this._prefix?console.error(this._prefix,e):console.error(e)}}]),e}();n.Logger=i},{}],11:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("es6-promise").Promise,s=i;n.Promise=s;var a=function(){function e(){r(this,e);var t=this;this._update=!1,this.promise=new i(function(e,n){t.resolve=e,t.reject=n});var n=this.promise.then;this.promise.then=function(e,r,o){return t._update=o,n.call(t.promise,e,r)}}return o(e,[{key:"notify",value:function(e){this._update&&"function"==typeof this._update&&this._update(e)}}]),e}();n.DeferredPromise=a},{"es6-promise":4}],12:[function(e,t,n){"use strict";function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){for(var r=!0;r;){var o=e,i=t,s=n;a=c=u=void 0,r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if("value"in a)return a.value;var u=a.get;return void 0===u?void 0:u.call(s)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=i,n=s,r=!0}},s=e("./promise"),a=e("browser-request"),u=function d(){o(this,d)};n.Request=u;var c=function p(){o(this,p)};n.Response=c;var f=function(e){function t(){o(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}return r(t,e),t}(c);n.APIResponse=f;var l=function(e){function t(e){o(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this);var n={},r=new s.Promise(function(t,r){a(e,function(e,o,i){if(n._lastError=e,n._lastResponse=o,n._lastResult=i,e)r(e);else if(o.statusCode<200||o.statusCode>=400){var s=new Error("Request Failed with status code of "+o.statusCode);r(s)}else t({response:o,payload:i})})});return r.requestInfo=n,r}return r(t,e),t}(u);n.APIRequest=l},{"./promise":11,"browser-request":1}],13:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){return r(this,e),this._settings=null,this}return o(e,[{key:"factory",value:function(e,t){return this._settings=t(),this}},{key:"get",value:function(e){return this._settings.get(e)}},{key:"finish",value:function(){return this}}]),e}(),s=(new i).factory("$ionicCoreSettings",function(){var e={};return{get:function(t){return e[t]?e[t]:null}}}).finish(),a=function(){function e(){r(this,e),this._locations={api:"https://apps.ionic.io",push:"https://push.ionic.io",analytics:"https://analytics.ionic.io"},this._devLocations=this.get("dev_locations"),this._devLocations||(this._devLocations={})}return o(e,[{key:"get",value:function(e){return s.get(e)}},{key:"getURL",value:function(e){return this._devLocations[e]?this._devLocations[e]:this._locations[e]?this._locations[e]:null}}]),e}();n.Settings=a},{}],14:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("./promise"),s=function(){function e(){r(this,e)}return o(e,[{key:"get",value:function(e){return window.localStorage.getItem(e)}},{key:"remove",value:function(e){return window.localStorage.removeItem(e)}},{key:"set",value:function(e,t){return window.localStorage.setItem(e,t)}}]),e}(),a={},u={},c=function(){function e(){r(this,e),this.strategy=new s}return o(e,[{key:"storeObject",value:function(e,t){var n=JSON.stringify(t);this.strategy.set(e,n),a[e]=t}},{key:"retrieveObject",value:function(e){var t=a[e];if(t)return t;var n=this.strategy.get(e);if(null==n)return null;try{return JSON.parse(n)}catch(r){return null}}},{key:"lockedAsyncCall",value:function(e,t){var n=this,r=new i.DeferredPromise;return u[e]?(r.reject("in_progress"),r.promise):"locked"===this.strategy.get(e)?(r.reject("last_call_interrupted"),r.promise.then(null,function(){n.strategy.remove(e)}),r.promise):(u[e]=!0,n.strategy.set(e,"locked"),t().then(function(t){r.resolve(t),delete u[e],n.strategy.remove(e)},function(t){r.reject(t),delete u[e],n.strategy.remove(e)},function(e){r.notify(e)}),r.promise)}}]),e}();n.Storage=c},{"./promise":11}],15:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("./request"),s=e("./promise"),a=e("./settings"),u=e("./core"),c=e("./storage"),f=e("./logger"),l=e("../push/push-token"),d=u.IonicPlatform,p=null,h=new a.Settings,v=new c.Storage,g=h.getURL("api")+"/api/v1/app/"+h.get("app_id")+"/users",y={load:function(e){return g+"/"+e.id},remove:function(e){return g+"/"+e.id},save:function(){return g+"/identify"},addToken:function(){return g+"/pushUnique"}},_=function(){function e(){r(this,e)}return o(e,null,[{key:"store",value:function(){v.storeObject(e.label,w.current())}},{key:"load",value:function(){var t=v.retrieveObject(e.label)||!1;return t?w.fromContext(t):!1}},{key:"label",get:function(){return"ionic_io_user_"+h.get("app_id")}}]),e}(),m=function(){function e(t){r(this,e),this.logger=new f.Logger({prefix:"Ionic Push Token:"}),this.tokens={android:[],ios:[]},t&&"object"==typeof t&&(this.tokens=t)}return o(e,[{key:"addToken",value:function(e){var t=null;if("undefined"==typeof e||!e||""===e)return this.logger.info("you need to pass a valid token to addToken()"),!1;if(e.token&&(e=e.token),d.isAndroidDevice()?t="android":d.isIOSDevice()&&(t="ios"),null===t||!this.tokens.hasOwnProperty(t))return this.logger.info("cannot determine the token platform. Are you running on an Android or iOS device?"),!1;var n=this.tokens[t],r=!1,o=null;for(o in n)n[o]===e&&(r=!0);return r||n.push(e),!0}},{key:"removeToken",value:function(e){var t;for(t in this.tokens){var n,r=this.tokens[t];for(n in r)r[n]===e&&r.splice(n,1)}return!0}}]),e}(),b=function(){function e(t){r(this,e),this.data={},"object"==typeof t&&(this.data=t)}return o(e,[{key:"set",value:function(e,t){this.data[e]=t}},{key:"unset",
value:function(e){delete this.data[e]}},{key:"get",value:function(e,t){return this.data.hasOwnProperty(e)?this.data[e]:t||null}},{key:"toString",value:function(){return JSON.stringify(this.data)}}]),e}(),w=function(){function e(){r(this,e),this.logger=new f.Logger({prefix:"Ionic User:"}),this._blockLoad=!1,this._blockSave=!1,this._blockDelete=!1,this._dirty=!1,this._fresh=!0,this.push=new m,this.data=new b}return o(e,[{key:"isDirty",value:function(){return this._dirty}},{key:"isFresh",value:function(){return this._fresh}},{key:"getAPIFormat",value:function(){var e=this.data.data;return e.user_id=this.id,e._push={android_tokens:this.push.tokens.android,ios_tokens:this.push.tokens.ios},e}},{key:"getFormat",value:function(e){var t=this,n=null;switch(e){case"api":n=t.getAPIFormat()}return n}},{key:"delete",value:function(){var e=this,t=new s.DeferredPromise;return e.valid?(e._blockDelete?(e.logger.info("a delete operation is already in progress for "+this+"."),t.reject(!1)):(e._blockDelete=!0,new i.APIRequest({uri:y.remove(this),method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(n){e._blockDelete=!1,e.logger.info("deleted "+e),t.resolve(n)},function(n){e._blockDelete=!1,e.logger.error(n),t.reject(n)})),t.promise):!1}},{key:"_store",value:function(){this===e.current()&&_.store()}},{key:"save",value:function(){var e=this,t=new s.DeferredPromise;return e._blockSave?(e.logger.info("a save operation is already in progress for "+this+"."),t.reject(!1)):(e._blockSave=!0,new i.APIRequest({uri:y.save(this),method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e.getFormat("api"))}).then(function(n){e._dirty=!1,e._fresh=!1,e.logger.info("saved user"),t.resolve(n)},function(n){e._dirty=!0,e.logger.error(n),t.reject(n)}).then(function(){e._blockSave=!1,e._store()})),t.promise}},{key:"toString",value:function(){return"<IonicUser ['"+this.id+"']>"}},{key:"addPushToken",value:function(e){return this.push.addToken(e)}},{key:"removePushToken",value:function(e){return e instanceof l.PushToken||(e=new l.PushToken(e)),this.push.removeToken(e)}},{key:"set",value:function(e,t){return this.data.set(e,t)}},{key:"get",value:function(e,t){return this.data.get(e,t)}},{key:"remove",value:function(e){return this.data.unset(e)}},{key:"valid",get:function(){return this.id?!0:!1}},{key:"id",set:function(e){return e&&"string"==typeof e&&""!==e?(this._id=e,!0):!1},get:function(){return this._id||null}}],[{key:"current",value:function(t){return t?(p=t,_.store(),p):(p||(p=_.load()),p||(p=new e),p)}},{key:"fromContext",value:function(t){var n=new e;return n.id=t._id,n.data=new b(t.data),n.push=new m(t.push.tokens),n._fresh=t._fresh,n._dirty=t._dirty,n}},{key:"load",value:function(t){var n=new s.DeferredPromise,r=new e;return r.id=t,r._blockLoad?(r.logger.info("a load operation is already in progress for "+this+"."),n.reject(!1)):(r._blockLoad=!0,new i.APIRequest({uri:y.load(r),method:"GET",json:!0,headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){r._blockLoad=!1,r.logger.info("loaded user"),r.data=new b(e.payload.custom_data),e.payload._push&&e.payload._push.android_tokens&&(r.push.tokens.android=e.payload._push.android_tokens),e.payload._push&&e.payload._push.ios_tokens&&(r.push.tokens.ios=e.payload._push.ios_tokens),r.image=e.payload.image,r._fresh=!1,n.resolve(r)},function(e){r._blockLoad=!1,r.logger.error(e),n.reject(e)})),n.promise}},{key:"anonymousId",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})}}]),e}();n.User=w},{"../push/push-token":16,"./core":7,"./logger":10,"./promise":11,"./request":12,"./settings":13,"./storage":14}],16:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){r(this,e),this._token=t||null}return o(e,[{key:"toString",value:function(){var e=this._token||"null";return"<PushToken ['"+e+"']>"}},{key:"token",set:function(e){this._token=e},get:function(){return this._token}}]),e}();n.PushToken=i},{}]},{},[11,12,9,10,14,13,7,15,6,8,5]);